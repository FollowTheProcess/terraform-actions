# Terraform Actions

[![License](https://img.shields.io/github/license/FollowTheProcess/terraform-actions)](https://github.com/FollowTheProcess/terraform-actions)
[![GitHub](https://img.shields.io/github/v/release/FollowTheProcess/terraform-actions?logo=github&sort=semver)](https://github.com/FollowTheProcess/terraform-actions)

Consistent, high quality, and configurable GitHub Actions for managing infrastructure with Terraform üèóÔ∏è

- [Terraform Actions](#terraform-actions)
  - [Plan](#plan)
    - [Description](#description)
    - [Inputs](#inputs)
    - [Outputs](#outputs)
    - [Runs](#runs)
    - [Usage](#usage)
  - [Apply](#apply)
    - [Description](#description-1)
    - [Inputs](#inputs-1)
    - [Runs](#runs-1)
    - [Usage](#usage-1)

## Plan

All Terraform things should start with a plan!

<!-- Docs below generated by action-docs -->

<!-- action-docs-all source="plan/action.yml" project="FollowTheProcess/terraform-actions/plan" version="v1" -->
### Description

GitHub Actions to produce a Terraform plan

### Inputs

| name                | description                                                                                             | required | default  |
| ------------------- | ------------------------------------------------------------------------------------------------------- | -------- | -------- |
| `terraform-version` | <p>The version of Terraform to install and run</p>                                                      | `false`  | `latest` |
| `backend-config`    | <p>Optional path to a .tfbackend file (relative to <code>cwd</code>) to use for initialisation</p>      | `false`  | `""`     |
| `var-file`          | <p>Optional path to a .tfvars file (relative to <code>cwd</code>) to pass to terraform for the plan</p> | `false`  | `""`     |
| `cwd`               | <p>The working directory to be in for the duration of the action</p>                                    | `false`  | `.`      |

### Outputs

| name                 | description                                                                                                       |
| -------------------- | ----------------------------------------------------------------------------------------------------------------- |
| `plan-artifact-name` | <p>The name of the uploaded artifact, can be passed to actions/download-artifact as <code>name</code></p>         |
| `plan-artifact-id`   | <p>The GitHub ID of the Terraform Plan artifact, can be used by the REST API</p>                                  |
| `plan-download-url`  | <p>The URL to download the produced Terraform Plan</p>                                                            |
| `plan-filename`      | <p>The filename of the produced .tfplan file, can be passed to actions/download-artifact as <code>path</code></p> |
| `run-id`             | <p>The ID of the GitHub Actions run publishing the plan, can be used by other actions to retrieve it</p>          |

### Runs

This action is a `composite` action.

### Usage

```yaml
- uses: FollowTheProcess/terraform-actions/plan@v1
  with:
    terraform-version:
    # The version of Terraform to install and run
    #
    # Required: false
    # Default: latest

    backend-config:
    # Optional path to a .tfbackend file (relative to `cwd`) to use for initialisation
    #
    # Required: false
    # Default: ""

    var-file:
    # Optional path to a .tfvars file (relative to `cwd`) to pass to terraform for the plan
    #
    # Required: false
    # Default: ""

    cwd:
    # The working directory to be in for the duration of the action
    #
    # Required: false
    # Default: .
```
<!-- action-docs-all source="plan/action.yml" project="FollowTheProcess/terraform-actions/plan" version="v1" -->

## Apply

<!-- Docs below generated by action-docs -->

<!-- action-docs-all source="apply/action.yml" project="FollowTheProcess/terraform-actions/apply" version="v1" -->
### Description

GitHub Actions to apply Terraform infrastructure changes

### Inputs

| name                | description                                                                                            | required | default  |
| ------------------- | ------------------------------------------------------------------------------------------------------ | -------- | -------- |
| `terraform-version` | <p>The version of Terraform to install and run</p>                                                     | `false`  | `latest` |
| `backend-config`    | <p>Optional path to a .tfbackend file (relative to <code>cwd</code>) to use for initialisation</p>     | `false`  | `""`     |
| `plan-filename`     | <p>The path to a previously produced terraform plan. Cannot be used with <code>var-file</code></p>     | `false`  | `""`     |
| `var-file`          | <p>The path to a .tfvars file to use for the apply. Cannot be used with <code>plan-filename</code></p> | `false`  | `""`     |
| `cwd`               | <p>The working directory to be in for the duration of the action</p>                                   | `false`  | `.`      |

### Runs

This action is a `composite` action.

### Usage

```yaml
- uses: FollowTheProcess/terraform-actions/apply@v1
  with:
    terraform-version:
    # The version of Terraform to install and run
    #
    # Required: false
    # Default: latest

    backend-config:
    # Optional path to a .tfbackend file (relative to `cwd`) to use for initialisation
    #
    # Required: false
    # Default: ""

    plan-filename:
    # The path to a previously produced terraform plan. Cannot be used with `var-file`
    #
    # Required: false
    # Default: ""

    var-file:
    # The path to a .tfvars file to use for the apply. Cannot be used with `plan-filename`
    #
    # Required: false
    # Default: ""

    cwd:
    # The working directory to be in for the duration of the action
    #
    # Required: false
    # Default: .
```
<!-- action-docs-all source="apply/action.yml" project="FollowTheProcess/terraform-actions/apply" version="v1" -->
